# 更新记录

## [2.1.0] 2026.01.29

**该版本极大的提升了多种边缘情况下的稳定性，部分问题是从第一个版本就存在，推荐更新使用**

### 新增

- 重构 PHP 实现，大幅提升稳定性
- 重命名 assets/.net 目录为 assets/dotnet
- 改进重定向处理逻辑和资源清理机制
- 改进负载均衡场景下的连接稳定性问题
- 改进全部日志消息，确保一致性和语法正确性

### 修复

- 修复 classic 模式下 EOF 处理和线程清理问题
- 修复连接检查时自动重定向导致的问题

## [2.0.0] 2025.12.08

**此版本为重大更新，与旧版本不兼容，服务端必须使用 [v2.0.0](https://github.com/zema1/suo5/tree/v2.0.0/assets) 以上版本**

### 新增
- 全面重构客户端和服务端代码，修复多个潜在问题，大幅提升稳定性和可靠性
- 采用全新传输协议，进一步收敛流量特征，提升隐蔽性
- 正式增加 PHP 支持，支持 PHP5.6+，支持 Nginx 和 Apache 中间件
- 新增基于请求重试的负载均衡支持，解决部分场景仅可控部分节点的情况
- 新增短链接方式支持，具备极佳的兼容性，但延迟稍高
  - 基于 HTTP 轮询实现，适合无法使用长连接的环境
  - 增加多路复用支持，可以使用少量请求同时开启大量 TCP 连接
  - 支持自定义轮询间隔和 QPS 等
- 基于 React + Shadcn 重写客户端界面
  - 新增连接数统计和简易网速统计功能
  - 新增夜间模式支持，可以一键切换
  - 改进高级选项交互，降低使用难度
- 新增导入/导出配置支持，方便一键分享连接参数
- 新增大量实战模拟环境的自动化测试，确保兼容主流中间件和环境
- 新增使用端口转发而非开启 socks5 服务的支持
- 改进说明文档，增加使用指引和常见问题说明

### 修复

- 修复部分环境下内网流量集中转发失败的问题
- 修复握手阶段没有遵循超时配置和代理配置的问题
- 修复部分潜在的逻辑竞争问题导致连接未释放问题

## [1.3.0] 2024.08.28

### 新增

- 增加实验性的 PHP 支持，使用之前请务必认真阅读文档
- 增加配置文件支持，支持导入导出配置文件来做配置复用
- 支持配置域名/IP的过滤规则，支持 Glob 通配符, 如 `*.example.com`
- 默认启用 `cookiejar`，如有问题请手动禁用
- 适当调整 GUI 版的界面布局，更加紧凑和聚焦

### 修复

- 修复 `weblogic` 等中间件内网转发失败问题
- 修复 Windows7 下客户端无法使用的问题
- 修复 `Suo5WebFlux` 拼写错误
- 去除部分无用的默认 Header

### 变更

- 测试失败时，将会直接认为连接不成功，而不是保持监听

## [1.2.0] 2024.04.30

### 修复

- 修复部分网站 `TLS` 连接失败的问题 #55
- 更新部分依赖至最新版

## [1.1.0] 2024.01.17

### 新增

- 增加 .Net 内存马支持，感谢 [@dust-life](https://github.com/dust-life) 贡献

### 修复

- 修复部分网站 TLS 连接失败的问题
- 修复 TLS 握手失败时连接未关闭的问题

### 变更

- 暂时禁用 HTTP2 的支持

## [1.0.0] 2023.12.18

### 新增

- 增加 `aspx` 脚本支持，最低支持 .Net Framework 2.0
- 增加 `WebFlex` 响应式支持，并贴心的提供一键注入 SpringCloudGateway 的代码
- 增加 `cookiejar` 支持，默认不启用
- 增加 `JDK21` 兼容性测试, 完美支持 `JDK21`
- 增加本地写超时的限制，解决某些情况连接数膨胀的问题
- 使用随机 `TLS` 指纹，去除 Go 语言本身的 `TLS` 握手特征
- 使用随机异或密钥，去除连接阶段响应包完全一致的流量特征

### 修复

- 修复界面版日志太多时 OOM 的问题
- 修复上游代理用户名密码大写不生效的问题
- 修复连接测试阶段未使用上游代理的问题

## [0.9.0] 2023.06-29

- 增加脏数据跳过逻辑, 自动计算偏移 #11
- 增加 `jspx` 形式的服务端, 通过全部中间件的测试 #31
- 允许连接测试时的 `EOF` 的情况，解决部分 Listener 内存马连不上的问题

### 修复

- 修复上游代理对连接测试的这个请求不生效的问题

## [0.8.0] 2023.05-23

### 修复

- 上一个版本因上游库忘记更新导致的连接超时问题 #28 #29

## [0.7.0] 2023-05-17

### 新增

- 增加 WebSphere 全版本支持
- 增加东方通（TongWeb）支持, 部分旧版需要禁用 gzip 才行
- 增加 `-no-gzip` 选项用于禁用响应中的 gzip 压缩
- 上游代理 `-proxy` 增加 http(s) 的支持，不再仅限于
  socks5  [#23](https://github.com/zema1/suo5/issues/23) [#25](https://github.com/zema1/suo5/issues/25)
- 去除 Session 相关依赖，优化 stream 读写相关的代码,
  有效解决部分能连上没数据的问题 [#22](https://github.com/zema1/suo5/issues/22)
- 增加代理自测试逻辑，如果没有报错那么代理一定可用
- 重写心跳包逻辑，如果 5s 内有数据读写，就不必发送心跳了
- 基础连接测试的逻辑融合到全双工的判断中，减少一个测试请求

### 修复

- 修复 GUI 版界面版本号错误的问题
- 暂时禁用 darwin 的内存占用显示

## [0.6.0] - 2023-04-10

### 新增

- 降低 JDK 依赖到 Java 4, 目前兼容 Java 4 ~ Java 19 全版本
- 新增 Tomcat Weblogic Resin Jetty 等中间件的自动化测试, 下列版本均测试通过:
    - Tomcat 4,5,6,7,8,9,10
    - Weblogic 10,12,14
    - Jboss 4,6
    - Jetty 9,10,11
- 更换一个更圆润的图标, 感谢 [@savior-only](https://github.com/savior-only)

### 修复

- 修复 GUI 版本在高版本 Edge 下启动缓慢的问题

## [0.5.0] - 2023-03-14

### 新增

- 每 5s 发送一个心跳包避免远端因 `ReadTimeout` 而关闭连接 [#12](https://github.com/zema1/suo5/issues/12)
- 改进地址检查方式，负载均衡的转发判断会更快一点

## [0.4.0] - 2023-03-05

### 新增

- 支持在负载均衡场景使用，需要通过 `-r` 指定一个 url，流量将集中到这个 url
- 支持自定义 header，而不仅仅是自定义 User-Agent [#5](https://github.com/zema1/suo5/issues/6)
- 优化连接控制，本地连接关闭后能更快的释放底层连接

### 修复

- 修复命令行版设置认证信息不生效的问题  [#5](https://github.com/zema1/suo5/issues/8)

## [0.3.0] - 2023-02-24

### 新增

- 支持自定义连接方法，如 GET, PATCH
- 支持配置上游代理, 仅支持 socks5
- 增加英文文档和变更记录

### 修复

- 修复部分英文语法错误

## [0.2.0] - 2023-02-22

### 新增

- 发布第一版本，包含 GUI 和 命令行版
- 使用 Github Action 自动构建所有版本的应用
